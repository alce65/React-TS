# React

- [React](#react)
  - [Requisitos previos](#requisitos-previos)
  - [Instalación de React y TypeScript con Vite](#instalación-de-react-y-typescript-con-vite)
    - [Mono-repositorio multi-paquete para React con TypeScript](#mono-repositorio-multi-paquete-para-react-con-typescript)
      - [Herramientas de edición de código](#herramientas-de-edición-de-código)
        - [Prettier](#prettier)
        - [.editorconfig para la configuración del editor](#editorconfig-para-la-configuración-del-editor)
    - [Creación de un nuevo proyecto con Vite](#creación-de-un-nuevo-proyecto-con-vite)
      - [Instalación de dependencias](#instalación-de-dependencias)
      - [Reubicación de elementos en el monorepo](#reubicación-de-elementos-en-el-monorepo)
        - [Configuración de ESLint](#configuración-de-eslint)
      - [Elementos adicionales](#elementos-adicionales)
        - [Herramientas de testing](#herramientas-de-testing)
  - [Componentes](#componentes)

## Requisitos previos

- **Git** instalado y configurado con tu usuario y correo electrónico
- **Node.js** y **npm** instalados en una versión estable reciente (LTS)
  La última en este momento es la 24.x
  Opcionalmente, puedes utilizar **nvm** (Node Version Manager) para gestionar múltiples versiones de Node.js en tu máquina.
- Editor de código: **Visual Studio Code**
- **Extensiones** recomendadas para Visual Studio Code:
  - EditorConfig for VS Code
  - ES7+ React/Redux/React-Native snippets (opcional)
  - ESLint
  - GitHub Copilot (opcional)
  - Prettier - Code formatter
  - Pretty TypeScript Errors (opcional)
  - TwoSlash Query Commands (opcional)
  - Thunder Client (opcional)
- **Extensiones** para Visual Studio Code para Git
  - Git Graph (o GitLens)
  - gitignore
- **Extensiones** para Visual Studio Code opcionales y específicas de este proyecto:
  - Code Spell Checker / Spanish - Code Spell Checker
  - Dracula Official Theme
  - Image preview
  - Live Server
  - Markdown All in One / Markdown shortcuts / MarkdownLint
  - Material Icon Theme
  - Peacock
  - Reload
  - Spanish Language Pack for Visual Studio Code
  - Versions Lens

React es una biblioteca de JavaScript para construir interfaces de usuario. Permite crear componentes reutilizables y gestionar el estado de la aplicación de manera eficiente.

## Instalación de React y TypeScript con Vite

Para instalar React y TypeScript, se puede utilizar Vite, un generador de proyectos y empaquetador de código.

Según ellos mismos <https://vite.dev/>

> Vite es una herramienta de creación de frontend increíblemente rápida que impulsa la próxima generación de aplicaciones web

- Un servidor de desarrollo que ofrece mejoras de funciones enriquecidas con respecto a los módulos ES nativos , por ejemplo, un reemplazo de módulo en caliente (HMR) extremadamente rápido .

- Un comando de compilación (builder) que agrupa su código con Rollup , pre-configurado para generar activos estáticos altamente optimizados para producción. Vite puede incorporar en esta fase herramientas como PostCSS, Sass, TypeScript, etc.

- La compatibilidad con frameworks y la integración con otras herramientas se pueden realizar mediante plugins, como sucede en el caso de React

### Mono-repositorio multi-paquete para React con TypeScript

Se crea en la raíz del proyecto:

- un **repositorio Git**
- un **package.json**

- la configuración del mono-repo se incluye en el **package.json**, indicando que los proyectos (paquetes) se encuentran en la carpeta projects

```json
{
  "name": "react-typescript-monorepo",
  "private": true,
  "workspaces": ["packages/*"],
}
```

Se añade también un archivo **.gitignore** para ignorar la carpeta node_modules

```ini gitignore
node_modules
coverage
*.lcov
lib-cov
.env
logs
...
```

#### Herramientas de edición de código

##### Prettier

- la configuración de Prettier se incluye en el package.json

Algunos de los parámetros más habituales son:

```json
{
  "prettier": {
    "singleQuote": true,
    "semi": false,
    "trailingComma": "all",
    "tabWidth": 2,
    "printWidth": 80
  }
}
```

En nuestro caso, hemos optado por utilizar comillas simples, dejando el resto de parámetros con sus valores por defecto:

```json
"singleQuote": true
```

En algunos casos, es preferible disponer de una copia local de Prettier en lugar de utilizar la que viene instalada con VSC. Para ello, puedes instalar Prettier como una dependencia de desarrollo:

```shell
npm i -D prettier
```

##### .editorconfig para la configuración del editor

Junto a Prettier, es frecuente definir el comportamiento del editor desde el fichero .editorconfig, que es un estándar de configuración de editores de texto. Puedes crear un archivo `.editorconfig` en la raíz de tu proyecto con el siguiente contenido:

```ini
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 4
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = false

[*.html]
indent_size = 2

[*.md]
indent_size = 2

[*.yml]
indent_size = 2

[*.yaml]
indent_size = 2

[*.json]
indent_size = 2
...
```

### Creación de un nuevo proyecto con Vite

Para crear un nuevo proyecto con Vite, se puede utilizar el siguiente comando:

```shell
npm create vite@latest
```

Esto iniciará un asistente que te guiará a través de la creación del proyecto. Puedes elegir entre diferentes plantillas, como React, Vue, Svelte, etc.

Otra opción es indicar directamente el nombre del proyecto y la plantilla que deseas utilizar. Por ejemplo, para crear un proyecto de React con TypeScript, puedes usar el siguiente comando:

```shell
npm create vite@latest nombre-del-proyecto -- --template react-ts
```

El resultado incluye las siguientes dependencias:

```json
 "dependencies": {
    "react": "^19.1.0",
    "react-dom": "^19.1.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.25.0",
    "@types/react": "^19.1.2",
    "@types/react-dom": "^19.1.2",
    "@vitejs/plugin-react": "^4.4.1",
    "eslint": "^9.25.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^16.0.0",
    "typescript": "~5.8.3",
    "typescript-eslint": "^8.30.1",
    "vite": "^6.3.5"
  }
```

Como se ve, se han instalado TypeScript, React, ESLint y Vite, como builder.
El archivo `tsconfig.json` se crea automáticamente y contiene la configuración básica para TypeScript. Puedes personalizarlo según tus necesidades.
Lo mismo sucede con el archivo de configuración de ESLint, `eslint.config.js`, y con el del propio `vitest`.

#### Instalación de dependencias

Para instalar las dependencias del proyecto, puedes utilizar el siguiente comando:

```shell
npm i
```

Esto instalará todas las dependencias necesarias para el proyecto, incluyendo React, ReactDOM y TypeScript.

Al ser un monorepo, las dependencias se instalan en la raíz del proyecto, en la carpeta `node_modules`.

#### Reubicación de elementos en el monorepo

ESLint puede ubicarse en la raíz del monorepo, ya que su configuración afecta a todos los paquetes.

Los archivos `tsconfig.app.json` y `tsconfig.node.json` se pueden mantener en cada proyecto.

[Opcionalmente] El archivo `tsconfig.json` se puede ubicar en la raíz si todos los paquetes van a compartir la misma configuración de TypeScript. Si cada paquete tiene necesidades diferentes, es mejor tener un `tsconfig.json` en cada paquete.

En el primero de los casos

- se reubican el la raíz del monorepo los archivos `tsconfig.app.json` y `tsconfig.node.json`,
- se mantiene en cada proyecto el `tsconfig.json`, que se modifica para que extienda correctamente los anteriores.

```json
{
  "files": [],
  "references": [
    { "path": "../../tsconfig.app.json" },
    { "path": "../../tsconfig.node.json" }
  ]
}
```

<!--
En la configuración de ESLint se añade `tsconfigRootDir: ...`, lo que permite a ESLint encontrar correctamente el archivo `tsconfig.json` en la raíz del monorepo.
-->

El `vite.config.ts` se mantiene en el paquete específico donde se utilizará.

##### Configuración de ESLint

De acuerdo con el Readme del proyecto generado por Vite, la recomendación respecto a la configuración de ESLint es la siguiente:

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      ...tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      ...tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      ...tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
]);
```

En nuestro caso, la configuración incluye los plugins para React Hooks(`eslint-plugin-react-hooks`) y React Refresh(`eslint-plugin-react-refresh`), y la configuración completa que estamos utilizada es la siguiente:

```js
export default tseslint.config([
  globalIgnores(['dist']),
  {
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      ...tseslint.configs.strict,
      ...tseslint.configs.stylistic,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    rules: {
      ...reactHooks.configs.recommended.rules,
      '@typescript-eslint/consistent-type-definitions': 'off',
      '@typescript-eslint/explicit-function-return-type': 'warn',
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
]);
```

Para comprobar el correcto funcionamiento de ESLint, puedes ejecutar el siguiente comando:

```shell
npm run lint
```

#### Elementos adicionales

Además de las dependencias básicas, es posible que desees instalar algunas dependencias adicionales para mejorar tu flujo de trabajo.

##### Herramientas de testing

La más habitual de todas ellas es alguna herramienta de testing, como Vitest, que es un framework de pruebas para Vite. Puedes instalarlo con el siguiente comando:

```shell
npm i -D vitest
```

También es necesario ajustar la configuración de ESLint para que funcione con Vitest. Puedes hacerlo agregando el siguiente plugin a tu archivo de configuración de ESLint:

```js
{
  "plugins": ["vitest"]
}
```

Finalmente puede se interesante agregar un script para ejecutar las pruebas en tu archivo `package.json`:

```json
"scripts": {
  "test": "vitest"
}
```

## Componentes

Los componentes son la base de React. Un componente es una función o clase que devuelve un fragmento de código HTML. Los componentes pueden ser de clase o funcionales.

- Los componentes funcionales son funciones de JavaScript que devuelven JSX. Son la forma habitual de crear componentes en proyectos de React de los últimos años.
- Los componentes de clase son clases de JavaScript que extienden la clase `React.Component` y tienen un método `render()` que devuelve JSX.

**JSX** es una extensión de sintaxis para JavaScript que permite escribir HTML dentro de JavaScript. JSX se compila a JavaScript puro antes de ser ejecutado en el navegador.

- JSX permite escribir HTML de manera más legible y fácil de entender.
- JSX se utiliza para describir cómo debería lucir la interfaz de usuario.
